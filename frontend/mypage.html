<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>마이페이지</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header class="top-bar">
    <a href="home.html">
        <img src="images/icon.png" alt="로고" class="logo">
    </a>
    <nav class="nav-menu">
        <input type="text" placeholder="영화 검색" class="search-input">
    </nav>
    <a href="login.html" class="top-login-btn">로그인</a>
    <a href="signup.html" class="top-signup-btn">회원가입</a>
</header>

<div class="mypage-container">
	<!--기본정보-->
	<section class="profile-box">
	    <img src="images/profile.png" alt="프로필" class="profile-img" id="profile-img">
	    <div class="profile-info">
	        <h2 class="username">지현 님</h2>
	        <p>Email: example@email.com</p>
	        <p>가입일: 2024-02-12</p>
	        <input type="file" id="profile-input" accept="image/*" style="display:none;">
	    </div>
	</section>


    <!--메뉴-->
    <div class="mypage-tabs">
        <button class="tab-btn active" data-target="scores">영어 성적</button>
        <button class="tab-btn" data-target="wishlist">찜한 영화</button>
        <button class="tab-btn" data-target="reviews">내 리뷰</button>
    </div>

    <!--탭-->
    <div class="mypage-content">

        <!-- 영어 성적 -->
        <div id="scores" class="content-box show">
            <div id="score-input-section">
                <label>시험 종류</label>
                <select id="test-type">
                    <option value="">선택</option>
                    <option value="toeic">TOEIC</option>
                    <option value="toefl">TOEFL</option>
                    <option value="ielts">IELTS</option>
                </select>
                <label>점수 입력</label>
                <input type="number" id="test-score" placeholder="예: 850">
                <button id="save-score-btn">성적 저장</button>
            </div>
            <div id="score-result-section">
                <p><b>시험 :</b> <span id="saved-test"></span></p>
                <p><b>점수 :</b> <span id="saved-score"></span></p>
                <p><b>CEFR 레벨 :</b> <span id="saved-level"></span></p>
                <button id="edit-score-btn">수정하기</button>
            </div>
        </div>

        <!-- 찜한 영화 -->
		<div id="wishlist" class="content-box">
		    <div class="wishlist-container">
		        <!-- 카드 1개 예시 -->
		        <a href="detail.html" class="wishlist-card-link">
		            <div class="wishlist-card">
		                <!-- 포스터 -->
		                <img src="images/포스터.png" alt="다크 나이트" class="card-img">
		                <!-- 난이도 레벨 이미지 -->
		                <img src="images/level6.png" alt="level" class="card-level">
		                <!-- 한글명 -->
		                <div class="card-name">다크 나이트</div>
		                <!-- 영문명, 년도, 러닝타임 -->
		                <div class="card-ename">The Dark Knight · 2008 · 152m</div>
		                <!-- 태그 -->
		                <div class="card-tag">액션 · 범죄 · 서스펜스</div>
		            </div>
		        </a>

		    </div>
		</div>


		<!-- 내 리뷰 -->
		<div id="reviews" class="content-box">
		    <div class="review-container">
		        <!-- 리뷰 카드 1개 -->
		        <a href="detail.html" class="review-card-link">
			        <div class="review-card">
			            <img src="images/포스터.png" alt="다크 나이트" class="review-poster">
			            <div class="review-content">
			                <div class="review-header">
			                    <span class="review-title">다크 나이트</span>
			                </div>
			                <span class="review-date">2025-12-03 작성</span>
			                <p class="review-text">
			                    영화의 영어 난이도가 조금 어려웠지만, 표현들이 실용적이어서 학습에 도움이 되었습니다.
			                </p>
			                
			            </div>
			        </div>
			    </a>

		    </div>
		</div>



    </div>
</div>

<script>
    // 탭 전환
    const tabButtons = document.querySelectorAll(".tab-btn");
    const tabContents = document.querySelectorAll(".content-box");

    tabButtons.forEach(btn => {
        btn.addEventListener("click", () => {
            tabButtons.forEach(b => b.classList.remove("active"));
            btn.classList.add("active");

            tabContents.forEach(c => c.classList.remove("show"));
            document.getElementById(btn.dataset.target).classList.add("show");
        });
    });

    // 영어 성적 저장/수정
    const saveBtn = document.getElementById("save-score-btn");
    const editBtn = document.getElementById("edit-score-btn");
    const inputSection = document.getElementById("score-input-section");
    const resultSection = document.getElementById("score-result-section");

    function convertToCEFR(type, score){
        score = Number(score);
        if(type === "toeic"){
            if(score >= 945) return "C1";
            if(score >= 785) return "B2";
            if(score >= 550) return "B1";
            if(score >= 225) return "A2";
            return "A1";
        }
        if(type === "toefl"){
            if(score >= 95) return "C1";
            if(score >= 72) return "B2";
            if(score >= 42) return "B1";
            return "A2";
        }
        if(type === "ielts"){
            if(score > 8.0) return "C2";
            if(score >= 7.0) return "C1";
            if(score >= 5.5) return "B2";
            if(score >= 4.0) return "B1";
            if(score >= 2.5) return "A2";
            return "A1";
        }
    }

    saveBtn.addEventListener("click", ()=>{
        const type = document.getElementById("test-type").value;
        const score = document.getElementById("test-score").value;
        if(!type || !score) return;
        const level = convertToCEFR(type, score);

        localStorage.setItem("eng_test", type);
        localStorage.setItem("eng_score", score);
        localStorage.setItem("eng_level", level);

        loadScore();
    });

    editBtn.addEventListener("click", ()=>{
        inputSection.style.display = "block";
        resultSection.style.display = "none";
    });

    function loadScore(){
        const type = localStorage.getItem("eng_test");
        const score = localStorage.getItem("eng_score");
        const level = localStorage.getItem("eng_level");

        if(!type || !score || !level){
            inputSection.style.display = "block";
            resultSection.style.display = "none";
            return;
        }
        document.getElementById("saved-test").textContent = type.toUpperCase();
        document.getElementById("saved-score").textContent = score;
        document.getElementById("saved-level").textContent = level;

        inputSection.style.display = "none";
        resultSection.style.display = "block";
    }

    // 초기 로드
    loadScore();
</script>

</body>
</html>
